<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
	    <record id="base.group_hr_holiday" model="res.groups">
            <field name="name">Ressources humaines / Demande de congés</field>
        </record>
        <record id="base.group_hr_holiday1" model="res.groups">
            <field name="name">Ressources humaines / Première validation de congé</field>
        </record>
        <record id="base.group_hr_holiday2" model="res.groups">
            <field name="name">Ressources humaines / Deuxième validation de congé</field>
        </record>
	    
   		<record model="ir.ui.view" id="edit_holiday_new_inherit">
			<field name="name">hr.holidays.form</field>
			<field name="model">hr.holidays</field>
			<field name="inherit_id" ref="hr_holidays.edit_holiday_new" />
			<field name="arch" type="xml">
				<xpath expr="//button[@name='validate']" position="before">
					<button name="test_manager" string="Approuver la demande" type="object" states="confirm" class="oe_highlight" />
				</xpath>
				<xpath expr="//button[@name='validate']" position="replace">
					<button name="validate" invisible="1" />
				</xpath>
				
				<!-- Changement de groupe pour la visualisation des champs types de congé, employé, département-->
				<xpath expr="//field[@name='holiday_type']" position="replace">
					<field name="holiday_type" on_change="onchange_type(holiday_type)" attrs="{'readonly':[('type', '=', 'remove'),('state','!=','draft')]}" string="Mode" groups="base.group_hr_holiday" context="{'employee_id':employee_id}"/>
			    </xpath>
			    <xpath expr="//field[@name='employee_id']" position="replace">
					<field name="employee_id" attrs="{'required':[('holiday_type','=','employee')],'invisible':[('holiday_type','=','category')]}" on_change="onchange_employee(employee_id)" groups="base.group_hr_holiday"/>
				</xpath>
				<xpath expr="//field[@name='department_id']" position="replace">
					<field name="department_id" attrs="{'readonly':['|', ('type','=','add'),('holiday_type','=','category')],'invisible':[('holiday_type','=','category')]}" groups="base.group_hr_holiday"/>
				</xpath>
			</field>
		</record>
   	</data>
</openerp>